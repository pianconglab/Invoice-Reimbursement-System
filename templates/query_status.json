{
    "page": {
        "title": "查询申请状态 - 骈聪课题组发票报销系统",
        "layout": "centered-container",
        "components": [
            {
                "type": "row",
                "justify": "center",
                "children": [
                    {
                        "type": "col",
                        "lg": 16,
                        "md": 24,
                        "children": [
                            {
                                "type": "card",
                                "header": {
                                    "type": "title",
                                    "level": 4,
                                    "content": "查询报销状态",
                                    "icon": "bi-search"
                                },
                                "children": [
                                    {
                                        "type": "form",
                                        "name": "query-form",
                                        "prop": "queryForm",
                                        "children": [
                                            {
                                                "type": "row",
                                                "gutter": 20,
                                                "children": [
                                                    {
                                                        "type": "col",
                                                        "md": 16,
                                                        "children": [
                                                            {
                                                                "type": "form-item",
                                                                "label": "发票号码",
                                                                "prop": "invoice_number",
                                                                "children": [
                                                                    {
                                                                        "type": "input",
                                                                        "prop": "invoice_number",
                                                                        "placeholder": "请输入发票号码查询申请状态",
                                                                        "required": true
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "col",
                                                        "md": 8,
                                                        "style": {
                                                            "align-self": "flex-end"
                                                        },
                                                        "children": [
                                                            {
                                                                "type": "form-item",
                                                                "children": [
                                                                    {
                                                                        "type": "button",
                                                                        "label": "查询状态",
                                                                        "button_type": "primary",
                                                                        "icon": "bi-search",
                                                                        "style": {
                                                                            "width": "100%"
                                                                        },
                                                                        "event": "submit_query"
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "div",
                                        "name": "result-display",
                                        "style": {
                                            "margin-top": "2rem"
                                        },
                                        "condition_prop": "queryResult.status",
                                        "children": [
                                            {
                                                "type": "alert",
                                                "condition_value": "not_found",
                                                "title": "未找到记录：没有找到对应的申请记录，请检查发票号码是否正确。",
                                                "alert_type": "warning",
                                                "show_icon": true
                                            },
                                            {
                                                "type": "card",
                                                "name": "result-details",
                                                "condition_value": "found",
                                                "header": {
                                                    "type": "title",
                                                    "level": 5,
                                                    "content": "申请信息",
                                                    "icon": "bi-info-circle"
                                                },
                                                "children": [
                                                    {
                                                        "type": "descriptions",
                                                        "prop": "queryResult.data",
                                                        "column": 1,
                                                        "border": true,
                                                        "items": [
                                                            {
                                                                "label": "申请编号",
                                                                "prop": "app_number",
                                                                "slot": "code"
                                                            },
                                                            {
                                                                "label": "购买人",
                                                                "prop": "purchaser"
                                                            },
                                                            {
                                                                "label": "物品名称",
                                                                "prop": "item_name"
                                                            },
                                                            {
                                                                "label": "使用途径",
                                                                "prop": "usage_type",
                                                                "slot": "tag"
                                                            },
                                                            {
                                                                "label": "物品类型",
                                                                "prop": "item_type"
                                                            },
                                                            {
                                                                "label": "发票号码",
                                                                "prop": "invoice_number",
                                                                "slot": "code"
                                                            },
                                                            {
                                                                "label": "发票金额",
                                                                "prop": "invoice_amount",
                                                                "slot": "currency"
                                                            },
                                                            {
                                                                "label": "购买时间",
                                                                "prop": "purchase_time"
                                                            },
                                                            {
                                                                "label": "开票日期",
                                                                "prop": "invoice_date"
                                                            },
                                                            {
                                                                "label": "提交时间",
                                                                "prop": "created_at"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "div",
                                                        "name": "purchase-details-block",
                                                        "condition": "queryResult.data.purchase_details",
                                                        "style": {
                                                            "margin-top": "1.5rem"
                                                        },
                                                        "children": [
                                                            {
                                                                "type": "title",
                                                                "level": 6,
                                                                "content": "商品参数及用途说明："
                                                            },
                                                            {
                                                                "type": "div",
                                                                "style": {
                                                                    "background-color": "#f8f9fa",
                                                                    "padding": "1rem",
                                                                    "border-radius": "0.25rem"
                                                                },
                                                                "children": [
                                                                    {
                                                                        "type": "text",
                                                                        "prop": "queryResult.data.purchase_details",
                                                                        "is_html": true
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "div",
                                                        "name": "product-link-block",
                                                        "condition": "queryResult.data.product_link",
                                                        "style": {
                                                            "margin-top": "1rem"
                                                        },
                                                        "children": [
                                                            {
                                                                "type": "text",
                                                                "content": "<strong>商品链接：</strong>",
                                                                "is_html": true
                                                            },
                                                            {
                                                                "type": "link",
                                                                "href_prop": "queryResult.data.product_link",
                                                                "text_prop": "queryResult.data.product_link",
                                                                "target": "_blank",
                                                                "icon": "bi-box-arrow-up-right"
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "type": "row",
                                                        "gutter": 20,
                                                        "style": {
                                                            "margin-top": "1.5rem",
                                                            "text-align": "center"
                                                        },
                                                        "children": [
                                                            {
                                                                "type": "col",
                                                                "md": 12,
                                                                "children": [
                                                                    {
                                                                        "type": "card",
                                                                        "body_style": {
                                                                            "padding": "1rem"
                                                                        },
                                                                        "children": [
                                                                            {
                                                                                "type": "title",
                                                                                "level": 6,
                                                                                "content": "当前状态"
                                                                            },
                                                                            {
                                                                                "type": "icon",
                                                                                "style": {
                                                                                    "font-size": "2rem"
                                                                                },
                                                                                "conditional_class": {
                                                                                    "prop": "queryResult.data.status",
                                                                                    "mapping": {
                                                                                        "待审批": "bi bi-clock text-warning",
                                                                                        "报销中": "bi bi-hourglass-split text-primary",
                                                                                        "已报销": "bi bi-check-circle text-success",
                                                                                        "驳回": "bi bi-x-circle text-danger"
                                                                                    },
                                                                                    "default": "bi bi-question-circle text-secondary"
                                                                                }
                                                                            },
                                                                            {
                                                                                "type": "tag",
                                                                                "size": "large",
                                                                                "style": {
                                                                                    "margin-top": "0.5rem"
                                                                                },
                                                                                "prop": "queryResult.data.status",
                                                                                "conditional_type": {
                                                                                    "prop": "queryResult.data.status",
                                                                                    "mapping": {
                                                                                        "待审批": "warning",
                                                                                        "报销中": "primary",
                                                                                        "已报销": "success",
                                                                                        "驳回": "danger"
                                                                                    },
                                                                                    "default": "info"
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "col",
                                                                "md": 12,
                                                                "children": [
                                                                    {
                                                                        "type": "card",
                                                                        "body_style": {
                                                                            "padding": "1rem"
                                                                        },
                                                                        "children": [
                                                                            {
                                                                                "type": "title",
                                                                                "level": 6,
                                                                                "content": "审批意见"
                                                                            },
                                                                            {
                                                                                "type": "div",
                                                                                "condition": "queryResult.data.approval_comment",
                                                                                "children": [
                                                                                    {
                                                                                        "type": "text",
                                                                                        "prop": "queryResult.data.approval_comment",
                                                                                        "is_html": true
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "type": "div",
                                                                                "condition": "!queryResult.data.approval_comment",
                                                                                "children": [
                                                                                    {
                                                                                        "type": "text",
                                                                                        "content": "暂无审批意见",
                                                                                        "style": {
                                                                                            "color": "#6c757d"
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "div",
                                        "style": {
                                            "text-align": "center",
                                            "margin-top": "2rem"
                                        },
                                        "children": [
                                            {
                                                "type": "button",
                                                "label": "修改申请记录",
                                                "button_type": "primary",
                                                "style": "outline",
                                                "icon": "bi-pencil-square",
                                                "event": "navigate",
                                                "route": "/edit-application"
                                            },
                                            {
                                                "type": "button",
                                                "label": "提交新申请",
                                                "button_type": "secondary",
                                                "style": "outline",
                                                "icon": "bi-plus-circle",
                                                "event": "navigate",
                                                "route": "/",
                                                "style": {
                                                    "margin-left": "1rem"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    }
}